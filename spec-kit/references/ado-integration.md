# Azure DevOps Integration

## Detection

ADO repos have remotes matching:
- `*.visualstudio.com/*`
- `dev.azure.com/*`

Extract org/project from remote URL:
```powershell
$remote = git remote get-url origin
# https://msdata.visualstudio.com/Database%20Systems/_git/RgManager
# â†’ org: msdata, project: Database Systems, repo: RgManager
```

## Authentication

Use PAT from `AZURE_DEVOPS_EXT_PAT` env var (already configured for Jason's setup).

## Creating Work Items from Tasks

After `/speckit.tasks` generates `tasks.md`, convert to ADO work items:

```powershell
# Parse tasks from tasks.md
# For each task:
az boards work-item create `
  --org "https://msdata.visualstudio.com" `
  --project "Database Systems" `
  --type "Task" `
  --title "speckit: <task title>" `
  --description "<task description>" `
  --assigned-to "<user>"
```

Link tasks to a parent User Story:
```powershell
az boards work-item relation add `
  --id <task_id> `
  --relation-type "System.LinkTypes.Hierarchy-Reverse" `
  --target-id <parent_story_id>
```

## Creating Pull Requests

After implementation is complete:

```powershell
az repos pr create `
  --org "https://msdata.visualstudio.com" `
  --project "Database Systems" `
  --repository "RgManager" `
  --source-branch "feature/003-oauth2-auth" `
  --target-branch "main" `
  --title "speckit: <feature name>" `
  --description "<auto-generated from spec + plan summary>" `
  --work-items "<comma-separated work item ids>"
```

## Linking Work Items to Commits

Include work item IDs in commit messages:
```
speckit(implement): task 1 - setup OAuth2 provider #12345
```

ADO auto-links commits mentioning `#<work_item_id>`.

## Branch Naming

ADO convention: `feature/<number>-<short-name>`
Matches spec-kit's default branching pattern.

## Status Check

Query feature progress from ADO:
```powershell
# Get work items for current feature
az boards query --wiql "SELECT [System.Id],[System.Title],[System.State] FROM workitems WHERE [System.Tags] CONTAINS 'speckit' AND [System.IterationPath] UNDER @currentIteration"
```
